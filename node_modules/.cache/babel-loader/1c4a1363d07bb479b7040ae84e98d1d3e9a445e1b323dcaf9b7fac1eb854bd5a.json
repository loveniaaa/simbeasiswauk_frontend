{"ast":null,"code":"\"use client\";import React,{useEffect,useState}from\"react\";import StudentCard from\"./StudentCard\";import{FilterSection}from\"../../DaftarPendfartar/FilterSection\";import apiClient from\"../../../../../api/apiClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentList=()=>{const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({faculty:\"semua\",scholarship:\"semua\",status:\"semua\"});useEffect(()=>{const fetchStudents=async()=>{try{const storedUser=JSON.parse(localStorage.getItem(\"user\"));const token=storedUser===null||storedUser===void 0?void 0:storedUser.token;if(!token){console.error(\"No token found, user might not be logged in\");return;}const response=await apiClient.get(\"/scholarship/get\",{headers:{Authorization:`Bearer ${token}`}});const fetchedStudents=response.data.output_schema.records||[];setStudents(fetchedStudents);}catch(error){console.error(\"Error fetching students:\",error);}finally{setLoading(false);}};fetchStudents();},[]);const filteredStudents=students.filter(student=>{var _student$major;const facultyMatch=filters.faculty===\"semua\"||((_student$major=student.major)===null||_student$major===void 0?void 0:_student$major.facultyName)===filters.faculty;const scholarshipMatch=filters.scholarship===\"semua\"||student.scholarshipType===filters.scholarship;const statusMatch=filters.status===\"semua\"||filters.status===\"Aktif\"&&student.status===\"APPROVED\"||filters.status===\"Tidak Aktif\"&&student.status!==\"APPROVED\";return facultyMatch&&scholarshipMatch&&statusMatch;});return/*#__PURE__*/_jsxs(\"main\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(FilterSection,{filters:filters,setFilters:setFilters}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Loading daftar pendaftar...\"}):filteredStudents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-danger\",children:\"Tidak ada data pendaftar.\"}):filteredStudents.map((student,index)=>{var _student$masterUser,_student$major2,_student$major3,_student$masterUser2,_student$masterUser3;return/*#__PURE__*/_jsx(StudentCard,{student:{avatar:((_student$masterUser=student.masterUser)===null||_student$masterUser===void 0?void 0:_student$masterUser.avatar)||\"https://ui-avatars.com/api/?name=Unknown\",faculty:`${((_student$major2=student.major)===null||_student$major2===void 0?void 0:_student$major2.facultyName)||\"-\"} / ${((_student$major3=student.major)===null||_student$major3===void 0?void 0:_student$major3.majorName)||\"-\"}`,name:`${((_student$masterUser2=student.masterUser)===null||_student$masterUser2===void 0?void 0:_student$masterUser2.lastName)||\"\"}, ${((_student$masterUser3=student.masterUser)===null||_student$masterUser3===void 0?void 0:_student$masterUser3.firstName)||\"\"}`,id:`${student.nim||\"-\"} / ${student.noRegistration||\"-\"}`,uuid:student.uuid,scholarshipType:student.scholarshipType||\"-\"}},index);})})]});};export default StudentList;","map":{"version":3,"names":["React","useEffect","useState","StudentCard","FilterSection","apiClient","jsx","_jsx","jsxs","_jsxs","StudentList","students","setStudents","loading","setLoading","filters","setFilters","faculty","scholarship","status","fetchStudents","storedUser","JSON","parse","localStorage","getItem","token","console","error","response","get","headers","Authorization","fetchedStudents","data","output_schema","records","filteredStudents","filter","student","_student$major","facultyMatch","major","facultyName","scholarshipMatch","scholarshipType","statusMatch","className","children","length","map","index","_student$masterUser","_student$major2","_student$major3","_student$masterUser2","_student$masterUser3","avatar","masterUser","majorName","name","lastName","firstName","id","nim","noRegistration","uuid"],"sources":["D:/Lovenia Skripsi 2/src/assets/Pages/Admin/PengolahanPengguna/Mahasiswa/StudentList.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport StudentCard from \"./StudentCard\";\r\nimport { FilterSection } from \"../../DaftarPendfartar/FilterSection\";\r\nimport apiClient from \"../../../../../api/apiClient\";\r\n\r\nconst StudentList = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    faculty: \"semua\",\r\n    scholarship: \"semua\",\r\n    status: \"semua\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      try {\r\n        const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n        const token = storedUser?.token;\r\n\r\n        if (!token) {\r\n          console.error(\"No token found, user might not be logged in\");\r\n          return;\r\n        }\r\n\r\n        const response = await apiClient.get(\"/scholarship/get\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        const fetchedStudents = response.data.output_schema.records || [];\r\n        setStudents(fetchedStudents);\r\n      } catch (error) {\r\n        console.error(\"Error fetching students:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  const filteredStudents = students.filter((student) => {\r\n    const facultyMatch =\r\n      filters.faculty === \"semua\" ||\r\n      student.major?.facultyName === filters.faculty;\r\n\r\n    const scholarshipMatch =\r\n      filters.scholarship === \"semua\" ||\r\n      student.scholarshipType === filters.scholarship;\r\n\r\n    const statusMatch =\r\n      filters.status === \"semua\" ||\r\n      (filters.status === \"Aktif\" && student.status === \"APPROVED\") ||\r\n      (filters.status === \"Tidak Aktif\" && student.status !== \"APPROVED\");\r\n\r\n    return facultyMatch && scholarshipMatch && statusMatch;\r\n  });\r\n\r\n  return (\r\n    <main className=\"mt-4\">\r\n      <FilterSection filters={filters} setFilters={setFilters} />\r\n      <div className=\"mt-4\">\r\n        {loading ? (\r\n          <p className=\"text-center\">Loading daftar pendaftar...</p>\r\n        ) : filteredStudents.length === 0 ? (\r\n          <p className=\"text-center text-danger\">Tidak ada data pendaftar.</p>\r\n        ) : (\r\n          filteredStudents.map((student, index) => (\r\n            <StudentCard\r\n              key={index}\r\n              student={{\r\n                avatar: student.masterUser?.avatar || \"https://ui-avatars.com/api/?name=Unknown\",\r\n                faculty: `${student.major?.facultyName || \"-\"} / ${student.major?.majorName || \"-\"}`,\r\n                name: `${student.masterUser?.lastName || \"\"}, ${student.masterUser?.firstName || \"\"}`,\r\n                id: `${student.nim || \"-\"} / ${student.noRegistration || \"-\"}`,\r\n                uuid: student.uuid,\r\n                scholarshipType: student.scholarshipType || \"-\",\r\n              }}\r\n            />\r\n\r\n\r\n          ))\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default StudentList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}