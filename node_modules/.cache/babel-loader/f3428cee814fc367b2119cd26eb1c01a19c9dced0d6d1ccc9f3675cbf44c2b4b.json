{"ast":null,"code":"\"use client\";import React,{useEffect,useState}from\"react\";import{FilterBar}from\"./FilterBar\";import{StudentCard}from\"./StudentCard\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const StudentList=()=>{const[students,setStudents]=useState([]);const[loading,setLoading]=useState(true);const[filters,setFilters]=useState({faculty:\"semua\",scholarship:\"semua\",status:\"semua\"});useEffect(()=>{const fetchStudents=async()=>{try{const storedUser=JSON.parse(localStorage.getItem(\"user\"));const token=storedUser===null||storedUser===void 0?void 0:storedUser.token;if(!token){console.error(\"No token found, user might not be logged in\");return;}const response=await axios.get(\"http://localhost:9900/sms-mgmt/scholarship/get\",{headers:{Authorization:`Bearer ${token}`}});const fetchedStudents=response.data.output_schema.records||[];setStudents(fetchedStudents);}catch(error){console.error(\"Error fetching students:\",error);}finally{setLoading(false);}};fetchStudents();},[]);const filteredStudents=students.filter(student=>{var _student$major;const facultyMatch=filters.faculty===\"semua\"||((_student$major=student.major)===null||_student$major===void 0?void 0:_student$major.facultyName)===filters.faculty;const scholarshipMatch=filters.scholarship===\"semua\"||student.scholarshipType===filters.scholarship;const statusMatch=filters.status===\"semua\"||filters.status===\"Aktif\"&&student.status===\"APPROVED\"||filters.status===\"Tidak Aktif\"&&student.status!==\"APPROVED\";return facultyMatch&&scholarshipMatch&&statusMatch;});return/*#__PURE__*/_jsxs(\"main\",{className:\"mt-4\",children:[/*#__PURE__*/_jsx(FilterBar,{filters:filters,setFilters:setFilters}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"Loading daftar pendaftar...\"}):filteredStudents.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-danger\",children:\"Tidak ada data pendaftar.\"}):filteredStudents.map((student,index)=>{var _student$major2,_student$major3,_student$masterUser,_student$masterUser2;return/*#__PURE__*/_jsx(StudentCard,{faculty:`${((_student$major2=student.major)===null||_student$major2===void 0?void 0:_student$major2.facultyName)||\"-\"} / ${((_student$major3=student.major)===null||_student$major3===void 0?void 0:_student$major3.majorName)||\"-\"}`,name:`${((_student$masterUser=student.masterUser)===null||_student$masterUser===void 0?void 0:_student$masterUser.lastName)||\"\"}, ${((_student$masterUser2=student.masterUser)===null||_student$masterUser2===void 0?void 0:_student$masterUser2.firstName)||\"\"}`,id:`${student.nim||\"-\"} / ${student.noRegistration||\"-\"}`,uuid:student.uuid// <-- TAMBAH INI !!\n,scholarshipType:student.scholarshipType||\"-\"},index);})})]});};","map":{"version":3,"names":["React","useEffect","useState","FilterBar","StudentCard","axios","jsx","_jsx","jsxs","_jsxs","StudentList","students","setStudents","loading","setLoading","filters","setFilters","faculty","scholarship","status","fetchStudents","storedUser","JSON","parse","localStorage","getItem","token","console","error","response","get","headers","Authorization","fetchedStudents","data","output_schema","records","filteredStudents","filter","student","_student$major","facultyMatch","major","facultyName","scholarshipMatch","scholarshipType","statusMatch","className","children","length","map","index","_student$major2","_student$major3","_student$masterUser","_student$masterUser2","majorName","name","masterUser","lastName","firstName","id","nim","noRegistration","uuid"],"sources":["D:/Lovenia Skripsi 2/src/assets/Pages/Bidang Kemahasiswaan/InformasiPendaftar/StudentList.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { FilterBar } from \"./FilterBar\";\r\nimport { StudentCard } from \"./StudentCard\";\r\nimport axios from \"axios\";\r\n\r\nexport const StudentList = () => {\r\n  const [students, setStudents] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [filters, setFilters] = useState({\r\n    faculty: \"semua\",\r\n    scholarship: \"semua\",\r\n    status: \"semua\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchStudents = async () => {\r\n      try {\r\n        const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n        const token = storedUser?.token;\r\n\r\n        if (!token) {\r\n          console.error(\"No token found, user might not be logged in\");\r\n          return;\r\n        }\r\n\r\n        const response = await axios.get(\"http://localhost:9900/sms-mgmt/scholarship/get\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        const fetchedStudents = response.data.output_schema.records || [];\r\n        setStudents(fetchedStudents);\r\n      } catch (error) {\r\n        console.error(\"Error fetching students:\", error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchStudents();\r\n  }, []);\r\n\r\n  const filteredStudents = students.filter((student) => {\r\n    const facultyMatch =\r\n      filters.faculty === \"semua\" ||\r\n      student.major?.facultyName === filters.faculty;\r\n\r\n    const scholarshipMatch =\r\n      filters.scholarship === \"semua\" ||\r\n      student.scholarshipType === filters.scholarship;\r\n\r\n    const statusMatch =\r\n      filters.status === \"semua\" ||\r\n      (filters.status === \"Aktif\" && student.status === \"APPROVED\") ||\r\n      (filters.status === \"Tidak Aktif\" && student.status !== \"APPROVED\");\r\n\r\n    return facultyMatch && scholarshipMatch && statusMatch;\r\n  });\r\n\r\n  return (\r\n    <main className=\"mt-4\">\r\n      <FilterBar filters={filters} setFilters={setFilters} />\r\n      <div className=\"mt-4\">\r\n        {loading ? (\r\n          <p className=\"text-center\">Loading daftar pendaftar...</p>\r\n        ) : filteredStudents.length === 0 ? (\r\n          <p className=\"text-center text-danger\">Tidak ada data pendaftar.</p>\r\n        ) : (\r\n          filteredStudents.map((student, index) => (\r\n            <StudentCard\r\n              key={index}\r\n              faculty={`${student.major?.facultyName || \"-\"} / ${student.major?.majorName || \"-\"}`}\r\n              name={`${student.masterUser?.lastName || \"\"}, ${student.masterUser?.firstName || \"\"}`}\r\n              id={`${student.nim || \"-\"} / ${student.noRegistration || \"-\"}`}\r\n              uuid={student.uuid}  // <-- TAMBAH INI !!\r\n              scholarshipType={student.scholarshipType || \"-\"}\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}