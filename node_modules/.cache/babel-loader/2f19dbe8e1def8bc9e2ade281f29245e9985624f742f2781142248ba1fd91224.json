{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{RegistrationHeader}from\"./RegistrationHeader\";import{FormInput}from\"./FormInput\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function FormPendaftaranGenBI(){const[firstName,setFirstName]=useState(\"\");const[lastName,setLastName]=useState(\"\");const[nim,setNim]=useState(\"\");const[noRegistration,setNoRegistration]=useState(\"\");const[scholarshipType,setScholarshipType]=useState(\"\");const[addressLine1,setAddressLine1]=useState(\"\");const[addressLine2,setAddressLine2]=useState(\"\");const[highSchoolName,setHighSchoolName]=useState(\"\");const[fatherName,setFatherName]=useState(\"\");const[motherName,setMotherName]=useState(\"\");const[majorId,setMajorId]=useState(\"\");// ✅ Tambahkan state untuk daftar jurusan\nconst[majors,setMajors]=useState([]);const navigate=useNavigate();// ✅ Ambil data jurusan dari backend\nuseEffect(()=>{const fetchMajors=async()=>{const user=JSON.parse(localStorage.getItem(\"user\"));const token=user===null||user===void 0?void 0:user.token;if(!token)return;try{const res=await axios.get(\"https://simbeasiswauk.site:9900/sms-mgmt/major/get\",{headers:{Authorization:`Bearer ${token}`}});const fetchedMajors=res.data.output_schema.records||[];setMajors(fetchedMajors);}catch(error){console.error(\"Gagal mengambil data jurusan:\",error);}};fetchMajors();},[]);const handleSubmit=async e=>{e.preventDefault();const requestBody={uuid:crypto.randomUUID(),nim,first_name:firstName,last_name:lastName,nomor_registrasi:noRegistration,scholarship_type:\"GenBI\",// ⛔ ini sudah cukup, tidak perlu dua kali\naddress_line_1:addressLine1,address_line_2:addressLine2,high_school_name:highSchoolName,father_name:fatherName,mother_name:motherName,major_id:majorId};const user=JSON.parse(localStorage.getItem(\"user\"));const token=user===null||user===void 0?void 0:user.token;if(!token){alert(\"Silakan login terlebih dahulu.\");return;}try{const response=await axios.post(\"https://simbeasiswauk.site:9900/sms-mgmt/scholarship/create\",requestBody,{headers:{Authorization:`Bearer ${token}`,\"Content-Type\":\"application/json\"}});// ✅ Simpan hasil ke localStorage\nlocalStorage.setItem(\"scholarship\",JSON.stringify(response.data.output_schema.result));alert(\"Data berhasil dikirim: \"+JSON.stringify(response.data));navigate(\"/beasiswa/genbi/form-pendaftaran/document\");}catch(error){var _error$response;console.error(\"Gagal mengirim data:\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);alert(\"Gagal mengirim data!\");}};return/*#__PURE__*/_jsx(\"main\",{className:\"bg-white\",style:{fontFamily:\"Onest, -apple-system, Roboto, Helvetica, sans-serif\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid bg-white py-5 mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-xxl-10\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"px-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(RegistrationHeader,{}),/*#__PURE__*/_jsx(FormInput,{label:\"NIM\",placeholder:\"type here\",value:nim,onChange:e=>setNim(e.target.value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Nomor Regis\",placeholder:\"type here\",value:noRegistration,onChange:e=>setNoRegistration(e.target.value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Jurusan\",placeholder:\"Select\",isSelect:true,value:majorId,onChange:e=>setMajorId(e.target.value),options:majors}),/*#__PURE__*/_jsx(FormInput,{label:\"Alamat\",placeholder:\"Type here\",value:addressLine1,onChange:e=>setAddressLine1(e.target.value)}),/*#__PURE__*/_jsx(FormInput,{placeholder:\"Type here\",value:addressLine2,onChange:e=>setAddressLine2(e.target.value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Asal Sekolah\",placeholder:\"Type here\",value:highSchoolName,onChange:e=>setHighSchoolName(e.target.value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Nama Ayah\",placeholder:\"Type here\",value:fatherName,onChange:e=>setFatherName(e.target.value)}),/*#__PURE__*/_jsx(FormInput,{label:\"Nama Ibu\",placeholder:\"Type here\",value:motherName,onChange:e=>setMotherName(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success px-4 py-2 mt-5 fw-semibold\",children:\"Next\"})]})})})})});}export default FormPendaftaranGenBI;","map":{"version":3,"names":["React","useEffect","useState","RegistrationHeader","FormInput","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","FormPendaftaranGenBI","firstName","setFirstName","lastName","setLastName","nim","setNim","noRegistration","setNoRegistration","scholarshipType","setScholarshipType","addressLine1","setAddressLine1","addressLine2","setAddressLine2","highSchoolName","setHighSchoolName","fatherName","setFatherName","motherName","setMotherName","majorId","setMajorId","majors","setMajors","navigate","fetchMajors","user","JSON","parse","localStorage","getItem","token","res","get","headers","Authorization","fetchedMajors","data","output_schema","records","error","console","handleSubmit","e","preventDefault","requestBody","uuid","crypto","randomUUID","first_name","last_name","nomor_registrasi","scholarship_type","address_line_1","address_line_2","high_school_name","father_name","mother_name","major_id","alert","response","post","setItem","stringify","result","_error$response","message","className","style","fontFamily","children","onSubmit","label","placeholder","value","onChange","target","isSelect","options","type"],"sources":["D:/Lovenia Skripsi 2/src/assets/Pages/Beasiswa/GenBI/FormPendaftaran/index.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { RegistrationHeader } from \"./RegistrationHeader\";\r\nimport { FormInput } from \"./FormInput\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction FormPendaftaranGenBI() {\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n  const [nim, setNim] = useState(\"\");\r\n  const [noRegistration, setNoRegistration] = useState(\"\");\r\n  const [scholarshipType, setScholarshipType] = useState(\"\");\r\n  const [addressLine1, setAddressLine1] = useState(\"\");\r\n  const [addressLine2, setAddressLine2] = useState(\"\");\r\n  const [highSchoolName, setHighSchoolName] = useState(\"\");\r\n  const [fatherName, setFatherName] = useState(\"\");\r\n  const [motherName, setMotherName] = useState(\"\");\r\n  const [majorId, setMajorId] = useState(\"\");\r\n\r\n  // ✅ Tambahkan state untuk daftar jurusan\r\n  const [majors, setMajors] = useState([]);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  // ✅ Ambil data jurusan dari backend\r\n  useEffect(() => {\r\n    const fetchMajors = async () => {\r\n      const user = JSON.parse(localStorage.getItem(\"user\"));\r\n      const token = user?.token;\r\n\r\n      if (!token) return;\r\n\r\n      try {\r\n        const res = await axios.get(\"https://simbeasiswauk.site:9900/sms-mgmt/major/get\", {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n          },\r\n        });\r\n\r\n        const fetchedMajors = res.data.output_schema.records || [];\r\n        setMajors(fetchedMajors);\r\n      } catch (error) {\r\n        console.error(\"Gagal mengambil data jurusan:\", error);\r\n      }\r\n    };\r\n\r\n    fetchMajors();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const requestBody = {\r\n      uuid: crypto.randomUUID(),\r\n      nim,\r\n      first_name: firstName,\r\n      last_name: lastName,\r\n      nomor_registrasi: noRegistration,\r\n      scholarship_type: \"GenBI\", // ⛔ ini sudah cukup, tidak perlu dua kali\r\n      address_line_1: addressLine1,\r\n      address_line_2: addressLine2,\r\n      high_school_name: highSchoolName,\r\n      father_name: fatherName,\r\n      mother_name: motherName,\r\n      major_id: majorId,\r\n    };\r\n\r\n    const user = JSON.parse(localStorage.getItem(\"user\"));\r\n    const token = user?.token;\r\n\r\n    if (!token) {\r\n      alert(\"Silakan login terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://simbeasiswauk.site:9900/sms-mgmt/scholarship/create\",\r\n        requestBody,\r\n        {\r\n          headers: {\r\n            Authorization: `Bearer ${token}`,\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      );\r\n    \r\n      // ✅ Simpan hasil ke localStorage\r\n      localStorage.setItem(\"scholarship\", JSON.stringify(response.data.output_schema.result));\r\n    \r\n      alert(\"Data berhasil dikirim: \" + JSON.stringify(response.data));\r\n      navigate(\"/beasiswa/genbi/form-pendaftaran/document\");\r\n    } catch (error) {\r\n      console.error(\"Gagal mengirim data:\", error.response?.data || error.message);\r\n      alert(\"Gagal mengirim data!\");\r\n    }\r\n    \r\n  };\r\n\r\n  return (\r\n    <main className=\"bg-white\" style={{ fontFamily: \"Onest, -apple-system, Roboto, Helvetica, sans-serif\" }}>\r\n      <div className=\"container-fluid bg-white py-5 mt-5\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-12 col-xxl-10\">\r\n            <form className=\"px-4\" onSubmit={handleSubmit}>\r\n              <RegistrationHeader />\r\n\r\n              <FormInput label=\"NIM\" placeholder=\"type here\" value={nim} onChange={(e) => setNim(e.target.value)} />\r\n              <FormInput label=\"Nomor Regis\" placeholder=\"type here\" value={noRegistration} onChange={(e) => setNoRegistration(e.target.value)} />\r\n\r\n              <FormInput\r\n                label=\"Jurusan\"\r\n                placeholder=\"Select\"\r\n                isSelect\r\n                value={majorId}\r\n                onChange={(e) => setMajorId(e.target.value)}\r\n                options={majors}\r\n              />\r\n\r\n              <FormInput label=\"Alamat\" placeholder=\"Type here\" value={addressLine1} onChange={(e) => setAddressLine1(e.target.value)} />\r\n              <FormInput placeholder=\"Type here\" value={addressLine2} onChange={(e) => setAddressLine2(e.target.value)} />\r\n\r\n              <FormInput label=\"Asal Sekolah\" placeholder=\"Type here\" value={highSchoolName} onChange={(e) => setHighSchoolName(e.target.value)} />\r\n              <FormInput label=\"Nama Ayah\" placeholder=\"Type here\" value={fatherName} onChange={(e) => setFatherName(e.target.value)} />\r\n              <FormInput label=\"Nama Ibu\" placeholder=\"Type here\" value={motherName} onChange={(e) => setMotherName(e.target.value)} />\r\n\r\n              <button type=\"submit\" className=\"btn btn-success px-4 py-2 mt-5 fw-semibold\">\r\n                Next\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default FormPendaftaranGenBI;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}