{"ast":null,"code":"\"use client\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{AnnouncementCard}from\"../../Admin/Pengumuman/AnnouncementCard\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const AnnouncementList=()=>{const[announcements,setAnnouncements]=useState([]);useEffect(()=>{const fetchAnnouncements=async()=>{try{const response=await axios.get(\"http://103.31.39.151:9900/sms-mgmt/announcement/list\");const records=response.data.output_schema.records;setAnnouncements(records||[]);}catch(error){console.error(\"Gagal mengambil pengumuman:\",error);}};fetchAnnouncements();},[]);const handleDelete=async uuid=>{try{await axios.delete(`http://103.31.39.151:9900/sms-mgmt/announcement/delete?uuid=${uuid}`);setAnnouncements(prev=>prev.filter(item=>item.uuid!==uuid));}catch(error){console.error(\"Gagal menghapus pengumuman:\",error);}};return/*#__PURE__*/_jsxs(\"section\",{className:\"py-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h4 fw-bold mb-4\",children:\"Pengumuman\"}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-light rounded-3 d-flex align-items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fs-5\",children:\"Tambahkan Pengumuman\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/f86c0f5ab4188643405595cb3b98aa2a04ca2d6e?placeholderIfAbsent=true\",alt:\"Add\",style:{width:\"24px\",height:\"24px\"}})]}),announcements.length>0?announcements.map(announcement=>/*#__PURE__*/_jsx(AnnouncementCard,{uuid:announcement.uuid,date:new Date(announcement.createdAt).toLocaleDateString(\"id-ID\",{day:\"2-digit\",month:\"long\",year:\"numeric\"}),title:announcement.title,category:announcement.category,onDetail:uuid=>console.log(\"Detail:\",uuid),onUpdate:uuid=>console.log(\"Update:\",uuid),onDelete:uuid=>handleDelete(uuid)},announcement.uuid)):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Belum ada pengumuman yang tersedia.\"})]});};","map":{"version":3,"names":["React","useEffect","useState","axios","AnnouncementCard","jsx","_jsx","jsxs","_jsxs","AnnouncementList","announcements","setAnnouncements","fetchAnnouncements","response","get","records","data","output_schema","error","console","handleDelete","uuid","delete","prev","filter","item","className","children","src","alt","style","width","height","length","map","announcement","date","Date","createdAt","toLocaleDateString","day","month","year","title","category","onDetail","log","onUpdate","onDelete"],"sources":["D:/Lovenia Skripsi 2/src/assets/Pages/Bidang Kemahasiswaan/Pengumuman/AnnouncementList.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { AnnouncementCard } from \"../../Admin/Pengumuman/AnnouncementCard\";\r\n\r\nexport const AnnouncementList = () => {\r\n  const [announcements, setAnnouncements] = useState([]);\r\n\r\n  useEffect(() => {\r\n    const fetchAnnouncements = async () => {\r\n      try {\r\n        const response = await axios.get(\"http://103.31.39.151:9900/sms-mgmt/announcement/list\");\r\n        const records = response.data.output_schema.records;\r\n        setAnnouncements(records || []);\r\n      } catch (error) {\r\n        console.error(\"Gagal mengambil pengumuman:\", error);\r\n      }\r\n    };\r\n\r\n    fetchAnnouncements();\r\n  }, []);\r\n\r\n  const handleDelete = async (uuid) => {\r\n    try {\r\n      await axios.delete(`http://103.31.39.151:9900/sms-mgmt/announcement/delete?uuid=${uuid}`);\r\n      setAnnouncements((prev) => prev.filter((item) => item.uuid !== uuid));\r\n    } catch (error) {\r\n      console.error(\"Gagal menghapus pengumuman:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"py-4\">\r\n      <h2 className=\"h4 fw-bold mb-4\">Pengumuman</h2>\r\n\r\n      <button className=\"btn btn-light rounded-3 d-flex align-items-center gap-3 mb-4\">\r\n        <span className=\"fs-5\">Tambahkan Pengumuman</span>\r\n        <img\r\n          src=\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/f86c0f5ab4188643405595cb3b98aa2a04ca2d6e?placeholderIfAbsent=true\"\r\n          alt=\"Add\"\r\n          style={{ width: \"24px\", height: \"24px\" }}\r\n        />\r\n      </button>\r\n\r\n      {announcements.length > 0 ? (\r\n        announcements.map((announcement) => (\r\n          <AnnouncementCard\r\n            key={announcement.uuid}\r\n            uuid={announcement.uuid}\r\n            date={new Date(announcement.createdAt).toLocaleDateString(\"id-ID\", {\r\n              day: \"2-digit\",\r\n              month: \"long\",\r\n              year: \"numeric\",\r\n            })}\r\n            title={announcement.title}\r\n            category={announcement.category}\r\n            onDetail={(uuid) => console.log(\"Detail:\", uuid)}\r\n            onUpdate={(uuid) => console.log(\"Update:\", uuid)}\r\n            onDelete={(uuid) => handleDelete(uuid)}\r\n          />\r\n        ))\r\n      ) : (\r\n        <p className=\"text-muted\">Belum ada pengumuman yang tersedia.</p>\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}