{"ast":null,"code":"import React from\"react\";import DocumentUploadHeader from\"./DocumentUploadHeader\";import FileUploadField from\"./UploadFileFields\";import apiClient from\"../../../../../api/apiClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FormPendaftaranDocumentKip=()=>{const[files,setFiles]=React.useState({});const[uploading,setUploading]=React.useState(false);const handleFileChange=(e,name)=>{setFiles(prev=>({...prev,[name]:e.target.files[0]}));};const handleSubmit=async e=>{e.preventDefault();setUploading(true);try{const user=JSON.parse(localStorage.getItem(\"user\"));// Ambil user (untuk token)\nconst scholarship=JSON.parse(localStorage.getItem(\"scholarship\"));// Ambil beasiswa\nconst uploadedBy=scholarship===null||scholarship===void 0?void 0:scholarship.uuid;if(!uploadedBy){alert(\"Gagal menemukan UUID beasiswa. Silakan daftar ulang.\");setUploading(false);return;}for(const[category,file]of Object.entries(files)){const formData=new FormData();formData.append(\"file\",file);formData.append(\"category\",category);formData.append(\"uploadedBy\",uploadedBy);// ← gunakan UUID beasiswa\nawait apiClient.post(\"/document/upload\",formData,{headers:{Authorization:`Bearer ${user.token}`}});console.log(`${category} uploaded`);}alert(\"Seluruh dokumen berhasil diunggah.\");}catch(err){console.error(\"Upload gagal:\",err);alert(\"Terjadi kesalahan saat mengunggah dokumen.\");}finally{setUploading(false);}};return/*#__PURE__*/_jsx(\"main\",{className:\"bg-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid bg-white py-5 mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-xxl-10\",children:[/*#__PURE__*/_jsx(DocumentUploadHeader,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FileUploadField,{label:\"Pass Foto *\",onChange:e=>handleFileChange(e,\"Pass Foto\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Resume Pribadi *\",onChange:e=>handleFileChange(e,\"Resume Pribadi\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Motivation Letter *\",onChange:e=>handleFileChange(e,\"Motivation Letter\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Fotocopy KTP *\",onChange:e=>handleFileChange(e,\"Fotocopy KTP\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Fotocopy KTM *\",onChange:e=>handleFileChange(e,\"Fotocopy KTM\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Transkrip Nilai *\",onChange:e=>handleFileChange(e,\"Transkrip Nilai\")}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success mt-5 px-4 py-2 fw-semibold\",disabled:uploading,children:uploading?\"Mengunggah...\":\"Submit\"})]})]})})})});};export default FormPendaftaranDocumentKip;","map":{"version":3,"names":["React","DocumentUploadHeader","FileUploadField","apiClient","jsx","_jsx","jsxs","_jsxs","FormPendaftaranDocumentKip","files","setFiles","useState","uploading","setUploading","handleFileChange","e","name","prev","target","handleSubmit","preventDefault","user","JSON","parse","localStorage","getItem","scholarship","uploadedBy","uuid","alert","category","file","Object","entries","formData","FormData","append","post","headers","Authorization","token","console","log","err","error","className","children","onSubmit","label","onChange","type","disabled"],"sources":["D:/Lovenia Skripsi 2/src/assets/Pages/Beasiswa/KIPKuliah/FormPendaftaranDocumen.jsx/index.jsx"],"sourcesContent":["import React from \"react\";\r\nimport DocumentUploadHeader from \"./DocumentUploadHeader\";\r\nimport FileUploadField from \"./UploadFileFields\";\r\nimport apiClient from \"../../../../../api/apiClient\";\r\n\r\nconst FormPendaftaranDocumentKip = () => {\r\n  const [files, setFiles] = React.useState({});\r\n  const [uploading, setUploading] = React.useState(false);\r\n\r\n  const handleFileChange = (e, name) => {\r\n    setFiles((prev) => ({\r\n      ...prev,\r\n      [name]: e.target.files[0],\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setUploading(true);\r\n\r\n    try {\r\n      const user = JSON.parse(localStorage.getItem(\"user\")); // Ambil user (untuk token)\r\n      const scholarship = JSON.parse(localStorage.getItem(\"scholarship\")); // Ambil beasiswa\r\n      const uploadedBy = scholarship?.uuid;\r\n\r\n      if (!uploadedBy) {\r\n        alert(\"Gagal menemukan UUID beasiswa. Silakan daftar ulang.\");\r\n        setUploading(false);\r\n        return;\r\n      }\r\n\r\n      for (const [category, file] of Object.entries(files)) {\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"category\", category);\r\n        formData.append(\"uploadedBy\", uploadedBy); // ← gunakan UUID beasiswa\r\n\r\n        await apiClient.post(\"/document/upload\", formData, {\r\n          headers: {\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        });\r\n\r\n        console.log(`${category} uploaded`);\r\n      }\r\n\r\n      alert(\"Seluruh dokumen berhasil diunggah.\");\r\n    } catch (err) {\r\n      console.error(\"Upload gagal:\", err);\r\n      alert(\"Terjadi kesalahan saat mengunggah dokumen.\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"bg-white\">\r\n      <div className=\"container-fluid bg-white py-5 mt-5\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-12 col-xxl-10\">\r\n            <DocumentUploadHeader />\r\n            <form onSubmit={handleSubmit}>\r\n              <FileUploadField label=\"Pass Foto *\" onChange={(e) => handleFileChange(e, \"Pass Foto\")} />\r\n              <FileUploadField label=\"Resume Pribadi *\" onChange={(e) => handleFileChange(e, \"Resume Pribadi\")} />\r\n              <FileUploadField label=\"Motivation Letter *\" onChange={(e) => handleFileChange(e, \"Motivation Letter\")} />\r\n              <FileUploadField label=\"Fotocopy KTP *\" onChange={(e) => handleFileChange(e, \"Fotocopy KTP\")} />\r\n              <FileUploadField label=\"Fotocopy KTM *\" onChange={(e) => handleFileChange(e, \"Fotocopy KTM\")} />\r\n              <FileUploadField label=\"Transkrip Nilai *\" onChange={(e) => handleFileChange(e, \"Transkrip Nilai\")} />\r\n\r\n              <button type=\"submit\" className=\"btn btn-success mt-5 px-4 py-2 fw-semibold\" disabled={uploading}>\r\n                {uploading ? \"Mengunggah...\" : \"Submit\"}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default FormPendaftaranDocumentKip;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,oBAAoB,KAAM,wBAAwB,CACzD,MAAO,CAAAC,eAAe,KAAM,oBAAoB,CAChD,MAAO,CAAAC,SAAS,KAAM,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAErD,KAAM,CAAAC,0BAA0B,CAAGA,CAAA,GAAM,CACvC,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAC,CAAGV,KAAK,CAACW,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC5C,KAAM,CAACC,SAAS,CAAEC,YAAY,CAAC,CAAGb,KAAK,CAACW,QAAQ,CAAC,KAAK,CAAC,CAEvD,KAAM,CAAAG,gBAAgB,CAAGA,CAACC,CAAC,CAAEC,IAAI,GAAK,CACpCN,QAAQ,CAAEO,IAAI,GAAM,CAClB,GAAGA,IAAI,CACP,CAACD,IAAI,EAAGD,CAAC,CAACG,MAAM,CAACT,KAAK,CAAC,CAAC,CAC1B,CAAC,CAAC,CAAC,CACL,CAAC,CAED,KAAM,CAAAU,YAAY,CAAG,KAAO,CAAAJ,CAAC,EAAK,CAChCA,CAAC,CAACK,cAAc,CAAC,CAAC,CAClBP,YAAY,CAAC,IAAI,CAAC,CAElB,GAAI,CACF,KAAM,CAAAQ,IAAI,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAE;AACvD,KAAM,CAAAC,WAAW,CAAGJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC,CAAC,CAAE;AACrE,KAAM,CAAAE,UAAU,CAAGD,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEE,IAAI,CAEpC,GAAI,CAACD,UAAU,CAAE,CACfE,KAAK,CAAC,sDAAsD,CAAC,CAC7DhB,YAAY,CAAC,KAAK,CAAC,CACnB,OACF,CAEA,IAAK,KAAM,CAACiB,QAAQ,CAAEC,IAAI,CAAC,EAAI,CAAAC,MAAM,CAACC,OAAO,CAACxB,KAAK,CAAC,CAAE,CACpD,KAAM,CAAAyB,QAAQ,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEL,IAAI,CAAC,CAC7BG,QAAQ,CAACE,MAAM,CAAC,UAAU,CAAEN,QAAQ,CAAC,CACrCI,QAAQ,CAACE,MAAM,CAAC,YAAY,CAAET,UAAU,CAAC,CAAE;AAE3C,KAAM,CAAAxB,SAAS,CAACkC,IAAI,CAAC,kBAAkB,CAAEH,QAAQ,CAAE,CACjDI,OAAO,CAAE,CACPC,aAAa,CAAE,UAAUlB,IAAI,CAACmB,KAAK,EACrC,CACF,CAAC,CAAC,CAEFC,OAAO,CAACC,GAAG,CAAC,GAAGZ,QAAQ,WAAW,CAAC,CACrC,CAEAD,KAAK,CAAC,oCAAoC,CAAC,CAC7C,CAAE,MAAOc,GAAG,CAAE,CACZF,OAAO,CAACG,KAAK,CAAC,eAAe,CAAED,GAAG,CAAC,CACnCd,KAAK,CAAC,4CAA4C,CAAC,CACrD,CAAC,OAAS,CACRhB,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,mBACER,IAAA,SAAMwC,SAAS,CAAC,UAAU,CAAAC,QAAA,cACxBzC,IAAA,QAAKwC,SAAS,CAAC,oCAAoC,CAAAC,QAAA,cACjDzC,IAAA,QAAKwC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACzCvC,KAAA,QAAKsC,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChCzC,IAAA,CAACJ,oBAAoB,GAAE,CAAC,cACxBM,KAAA,SAAMwC,QAAQ,CAAE5B,YAAa,CAAA2B,QAAA,eAC3BzC,IAAA,CAACH,eAAe,EAAC8C,KAAK,CAAC,aAAa,CAACC,QAAQ,CAAGlC,CAAC,EAAKD,gBAAgB,CAACC,CAAC,CAAE,WAAW,CAAE,CAAE,CAAC,cAC1FV,IAAA,CAACH,eAAe,EAAC8C,KAAK,CAAC,kBAAkB,CAACC,QAAQ,CAAGlC,CAAC,EAAKD,gBAAgB,CAACC,CAAC,CAAE,gBAAgB,CAAE,CAAE,CAAC,cACpGV,IAAA,CAACH,eAAe,EAAC8C,KAAK,CAAC,qBAAqB,CAACC,QAAQ,CAAGlC,CAAC,EAAKD,gBAAgB,CAACC,CAAC,CAAE,mBAAmB,CAAE,CAAE,CAAC,cAC1GV,IAAA,CAACH,eAAe,EAAC8C,KAAK,CAAC,gBAAgB,CAACC,QAAQ,CAAGlC,CAAC,EAAKD,gBAAgB,CAACC,CAAC,CAAE,cAAc,CAAE,CAAE,CAAC,cAChGV,IAAA,CAACH,eAAe,EAAC8C,KAAK,CAAC,gBAAgB,CAACC,QAAQ,CAAGlC,CAAC,EAAKD,gBAAgB,CAACC,CAAC,CAAE,cAAc,CAAE,CAAE,CAAC,cAChGV,IAAA,CAACH,eAAe,EAAC8C,KAAK,CAAC,mBAAmB,CAACC,QAAQ,CAAGlC,CAAC,EAAKD,gBAAgB,CAACC,CAAC,CAAE,iBAAiB,CAAE,CAAE,CAAC,cAEtGV,IAAA,WAAQ6C,IAAI,CAAC,QAAQ,CAACL,SAAS,CAAC,4CAA4C,CAACM,QAAQ,CAAEvC,SAAU,CAAAkC,QAAA,CAC9FlC,SAAS,CAAG,eAAe,CAAG,QAAQ,CACjC,CAAC,EACL,CAAC,EACJ,CAAC,CACH,CAAC,CACH,CAAC,CACF,CAAC,CAEX,CAAC,CAED,cAAe,CAAAJ,0BAA0B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}