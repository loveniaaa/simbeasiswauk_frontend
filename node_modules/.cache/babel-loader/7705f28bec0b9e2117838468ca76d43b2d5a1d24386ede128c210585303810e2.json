{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{AnnouncementCard}from\"./AnnouncementCard\";import{Link,useNavigate}from\"react-router-dom\";import apiClient from\"../../../../api/apiClient\";import DeleteConfirmationModal from\"./Delete\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const AnnouncementList=()=>{const[announcements,setAnnouncements]=useState([]);const[showDeleteModal,setShowDeleteModal]=useState(false);const[announcementToDelete,setAnnouncementToDelete]=useState(null);const navigate=useNavigate();useEffect(()=>{const fetchAnnouncements=async()=>{try{const storedUser=JSON.parse(localStorage.getItem(\"user\"));const token=storedUser===null||storedUser===void 0?void 0:storedUser.token;const response=await apiClient.get(\"/announcement/list\",{headers:{Authorization:`Bearer ${token}`}});const records=Array.isArray(response.data)?response.data:[];setAnnouncements(records);}catch(error){console.error(\"Gagal mengambil pengumuman:\",error);}};fetchAnnouncements();},[]);const handleDelete=async()=>{if(!announcementToDelete)return;try{await apiClient.delete(`/announcement/delete?uuid=${announcementToDelete.uuid}`);setAnnouncements(prev=>prev.filter(item=>item.uuid!==announcementToDelete.uuid));setShowDeleteModal(false);// Close the modal\n}catch(error){console.error(\"Gagal menghapus pengumuman:\",error);}};const handleDetail=uuid=>{navigate(`/bidang/announcement/detail/${uuid}`);};const handleUpdate=uuid=>{navigate(`/bidang/announcement/update/${uuid}`);};const openDeleteModal=announcement=>{setAnnouncementToDelete(announcement);setShowDeleteModal(true);};const closeDeleteModal=()=>{setShowDeleteModal(false);setAnnouncementToDelete(null);};return/*#__PURE__*/_jsxs(\"section\",{className:\"py-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"h4 fw-bold mb-4\",children:\"Pengumuman\"}),/*#__PURE__*/_jsxs(Link,{to:\"/admin/pengumuman/add\",className:\"btn btn-light rounded-3 d-flex align-items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fs-5\",children:\"Tambahkan Pengumuman\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/f86c0f5ab4188643405595cb3b98aa2a04ca2d6e?placeholderIfAbsent=true\",alt:\"Add\",style:{width:\"24px\",height:\"24px\"}})]}),announcements.length>0?announcements.map(announcement=>/*#__PURE__*/_jsx(AnnouncementCard,{uuid:announcement.uuid,title:announcement.title||\"(Tanpa Judul)\",category:announcement.category||\"-\",date:new Date(announcement.createdAt).toLocaleDateString(),onDetail:()=>handleDetail(announcement.uuid),onUpdate:()=>handleUpdate(announcement.uuid),onDelete:()=>openDeleteModal(announcement)},announcement.uuid)):/*#__PURE__*/_jsx(\"p\",{className:\"text-muted\",children:\"Belum ada pengumuman yang tersedia.\"}),/*#__PURE__*/_jsx(DeleteConfirmationModal,{show:showDeleteModal,onClose:closeDeleteModal,onConfirm:handleDelete,title:(announcementToDelete===null||announcementToDelete===void 0?void 0:announcementToDelete.title)||\"\"})]});};","map":{"version":3,"names":["React","useEffect","useState","AnnouncementCard","Link","useNavigate","apiClient","DeleteConfirmationModal","jsx","_jsx","jsxs","_jsxs","AnnouncementList","announcements","setAnnouncements","showDeleteModal","setShowDeleteModal","announcementToDelete","setAnnouncementToDelete","navigate","fetchAnnouncements","storedUser","JSON","parse","localStorage","getItem","token","response","get","headers","Authorization","records","Array","isArray","data","error","console","handleDelete","delete","uuid","prev","filter","item","handleDetail","handleUpdate","openDeleteModal","announcement","closeDeleteModal","className","children","to","src","alt","style","width","height","length","map","title","category","date","Date","createdAt","toLocaleDateString","onDetail","onUpdate","onDelete","show","onClose","onConfirm"],"sources":["D:/Lovenia Skripsi/localhost/simbeasiswauk_frontend/src/assets/Pages/Bidang Kemahasiswaan/Pengumuman/AnnouncementList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { AnnouncementCard } from \"./AnnouncementCard\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport apiClient from \"../../../../api/apiClient\";\r\nimport DeleteConfirmationModal from \"./Delete\";\r\n\r\nexport const AnnouncementList = () => {\r\n  const [announcements, setAnnouncements] = useState([]);\r\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\r\n  const [announcementToDelete, setAnnouncementToDelete] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchAnnouncements = async () => {\r\n      try {\r\n        const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n        const token = storedUser?.token;\r\n\r\n        const response = await apiClient.get(\"/announcement/list\", {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n\r\n        const records = Array.isArray(response.data) ? response.data : [];\r\n        setAnnouncements(records);\r\n      } catch (error) {\r\n        console.error(\"Gagal mengambil pengumuman:\", error);\r\n      }\r\n    };\r\n\r\n    fetchAnnouncements();\r\n  }, []);\r\n\r\n  const handleDelete = async () => {\r\n    if (!announcementToDelete) return;\r\n\r\n    try {\r\n      await apiClient.delete(`/announcement/delete?uuid=${announcementToDelete.uuid}`);\r\n      setAnnouncements((prev) => prev.filter((item) => item.uuid !== announcementToDelete.uuid));\r\n      setShowDeleteModal(false); // Close the modal\r\n    } catch (error) {\r\n      console.error(\"Gagal menghapus pengumuman:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDetail = (uuid) => {\r\n    navigate(`/bidang/announcement/detail/${uuid}`);\r\n  };\r\n\r\n  const handleUpdate = (uuid) => {\r\n    navigate(`/bidang/announcement/update/${uuid}`);\r\n  };\r\n\r\n  const openDeleteModal = (announcement) => {\r\n    setAnnouncementToDelete(announcement);\r\n    setShowDeleteModal(true);\r\n  };\r\n\r\n  const closeDeleteModal = () => {\r\n    setShowDeleteModal(false);\r\n    setAnnouncementToDelete(null);\r\n  };\r\n\r\n  return (\r\n    <section className=\"py-4\">\r\n      <h2 className=\"h4 fw-bold mb-4\">Pengumuman</h2>\r\n\r\n      <Link\r\n        to=\"/admin/pengumuman/add\"\r\n        className=\"btn btn-light rounded-3 d-flex align-items-center gap-3 mb-4\"\r\n      >\r\n        <span className=\"fs-5\">Tambahkan Pengumuman</span>\r\n        <img\r\n          src=\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/f86c0f5ab4188643405595cb3b98aa2a04ca2d6e?placeholderIfAbsent=true\"\r\n          alt=\"Add\"\r\n          style={{ width: \"24px\", height: \"24px\" }}\r\n        />\r\n      </Link>\r\n\r\n      {announcements.length > 0 ? (\r\n        announcements.map((announcement) => (\r\n          <AnnouncementCard\r\n            key={announcement.uuid}\r\n            uuid={announcement.uuid}\r\n            title={announcement.title || \"(Tanpa Judul)\"}\r\n            category={announcement.category || \"-\"}\r\n            date={new Date(announcement.createdAt).toLocaleDateString()}\r\n            onDetail={() => handleDetail(announcement.uuid)}\r\n            onUpdate={() => handleUpdate(announcement.uuid)}\r\n            onDelete={() => openDeleteModal(announcement)}\r\n          />\r\n        ))\r\n      ) : (\r\n        <p className=\"text-muted\">Belum ada pengumuman yang tersedia.</p>\r\n      )}\r\n\r\n      <DeleteConfirmationModal\r\n        show={showDeleteModal}\r\n        onClose={closeDeleteModal}\r\n        onConfirm={handleDelete}\r\n        title={announcementToDelete?.title || \"\"}\r\n      />\r\n    </section>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}