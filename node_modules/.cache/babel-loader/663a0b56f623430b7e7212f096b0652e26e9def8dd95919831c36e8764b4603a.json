{"ast":null,"code":"\"use client\";import React,{useState}from\"react\";import FormInput from\"./FormInput\";import FileUpload from\"./FileUpload\";import{Link}from\"react-router-dom\";import\"./announcement-form.css\";import apiClient from\"../../../../api/apiClient\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function AnnouncementForm(){const[form,setForm]=useState({uuid:\"\",title:\"\",description:\"\",category:\"\",publish_date:\"\",display_date:\"\"});const handleChange=e=>{const{name,value}=e.target;setForm({...form,[name]:value});};const handleSubmit=async e=>{e.preventDefault();const storedUser=JSON.parse(localStorage.getItem(\"user\"));const token=storedUser===null||storedUser===void 0?void 0:storedUser.token;if(!storedUser||!token){alert(\"Anda belum login. Silakan login terlebih dahulu.\");return;}try{const response=await apiClient.post(\"/announcement/create\",form,{headers:{Authorization:`Bearer ${token}`}});alert(\"Pengumuman berhasil dibuat!\");console.log(\"Respon:\",response.data);// Reset form\nsetForm({uuid:\"\",title:\"\",description:\"\",category:\"\",publish_date:\"\",display_date:\"\"});}catch(error){var _error$response;console.error(\"Gagal buat pengumuman:\",error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){alert(\"Autentikasi gagal. Silakan login kembali.\");}else{var _error$response2,_error$response2$data;alert(\"Gagal membuat pengumuman: \"+(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message));}}};return/*#__PURE__*/_jsxs(\"section\",{className:\"py-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start mb-4\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/pengumuman\",className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/659fa5f3e981f264647a7f21ca78fa1154d428a4?placeholderIfAbsent=true\",alt:\"Icon\",style:{width:\"25px\"}}),/*#__PURE__*/_jsxs(\"h1\",{className:\"h4 fw-bold mb-0\",children:[\"Pengumuman \",/*#__PURE__*/_jsx(\"span\",{className:\"text-muted\",children:\"/\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"text-primary\",children:\"Pengumuman Baru\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center bg-light rounded-3 py-2 px-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-muted me-3\",children:\"Search\"}),/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/7d324a11d19de8fbd804298d8135ece2db18bb3a?placeholderIfAbsent=true\",alt:\"Search\",style:{width:\"16px\"}})]})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"bg-light rounded-3 p-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white rounded-3 p-4 d-flex align-items-center justify-content-center hover-upload\",style:{height:\"150px\",width:\"150px\",cursor:\"pointer\"},children:/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/bd35fde20057cda4be331de813726b4ee550668f?placeholderIfAbsent=true\",alt:\"Upload\",style:{width:\"70px\"}})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-muted small mt-2 d-block\",children:\"Banner / Logo\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-9\",children:[/*#__PURE__*/_jsx(FormInput,{label:\"Judul Pengumuman\",placeholder:\"Judul\",name:\"title\",value:form.title,onChange:handleChange}),/*#__PURE__*/_jsx(FormInput,{label:\"Isi Pengumuman\",placeholder:\"Deskripsi\",multiline:true,height:150,name:\"description\",value:form.description,onChange:handleChange})]})]}),/*#__PURE__*/_jsx(FormInput,{label:\"Kategori Pengumuman\",placeholder:\"Kategori\",name:\"category\",value:form.category,onChange:handleChange,icon:\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/b8ed412834140eee3b26bb1f0b54e71a8bba8bec?placeholderIfAbsent=true\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6\",children:[/*#__PURE__*/_jsx(FormInput,{label:\"Tanggal Terbit\",type:\"date\",name:\"publish_date\",value:form.publish_date,onChange:handleChange}),/*#__PURE__*/_jsx(\"h3\",{className:\"h6 fw-bold mt-3\",children:\"Upload Lampiran\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(FormInput,{label:\"Tanggal Tayang\",type:\"date\",name:\"display_date\",value:form.display_date,onChange:handleChange})})]}),/*#__PURE__*/_jsx(FileUpload,{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success px-4 mt-5 shadow-sm save-btn\",type:\"submit\",children:\"Simpan\"})]})]});}export default AnnouncementForm;","map":{"version":3,"names":["React","useState","FormInput","FileUpload","Link","apiClient","jsx","_jsx","jsxs","_jsxs","AnnouncementForm","form","setForm","uuid","title","description","category","publish_date","display_date","handleChange","e","name","value","target","handleSubmit","preventDefault","storedUser","JSON","parse","localStorage","getItem","token","alert","response","post","headers","Authorization","console","log","data","error","_error$response","status","_error$response2","_error$response2$data","message","className","children","to","src","alt","style","width","onSubmit","height","cursor","label","placeholder","onChange","multiline","icon","type"],"sources":["D:/Lovenia Skripsi 2/src/assets/Pages/Admin/Pengumuman/AnnouncementForm.jsx"],"sourcesContent":["\"use client\";\r\nimport React, { useState } from \"react\";\r\nimport FormInput from \"./FormInput\";\r\nimport FileUpload from \"./FileUpload\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./announcement-form.css\";\r\nimport apiClient from \"../../../../api/apiClient\";\r\n\r\nfunction AnnouncementForm() {\r\n  const [form, setForm] = useState({\r\n    uuid: \"\",\r\n    title: \"\",\r\n    description: \"\",\r\n    category: \"\",\r\n    publish_date: \"\",\r\n    display_date: \"\",\r\n  });\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setForm({ ...form, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    const storedUser = JSON.parse(localStorage.getItem(\"user\"));\r\n    const token = storedUser?.token;\r\n\r\n    if (!storedUser || !token) {\r\n      alert(\"Anda belum login. Silakan login terlebih dahulu.\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await apiClient.post(\r\n        \"/announcement/create\",\r\n        form,\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n\r\n      alert(\"Pengumuman berhasil dibuat!\");\r\n      console.log(\"Respon:\", response.data);\r\n\r\n      // Reset form\r\n      setForm({\r\n        uuid: \"\",\r\n        title: \"\",\r\n        description: \"\",\r\n        category: \"\",\r\n        publish_date: \"\",\r\n        display_date: \"\",\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Gagal buat pengumuman:\", error);\r\n      if (error.response?.status === 401) {\r\n        alert(\"Autentikasi gagal. Silakan login kembali.\");\r\n      } else {\r\n        alert(\"Gagal membuat pengumuman: \" + (error.response?.data?.message || error.message));\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <section className=\"py-4\">\r\n      <div className=\"d-flex justify-content-between align-items-start mb-4\">\r\n        <Link to=\"/admin/pengumuman\" className=\"d-flex align-items-center gap-2\">\r\n          <img\r\n            src=\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/659fa5f3e981f264647a7f21ca78fa1154d428a4?placeholderIfAbsent=true\"\r\n            alt=\"Icon\"\r\n            style={{ width: \"25px\" }}\r\n          />\r\n          <h1 className=\"h4 fw-bold mb-0\">\r\n            Pengumuman <span className=\"text-muted\">/</span>{\" \"}\r\n            <span className=\"text-primary\">Pengumuman Baru</span>\r\n          </h1>\r\n        </Link>\r\n\r\n        <div className=\"d-flex align-items-center bg-light rounded-3 py-2 px-3\">\r\n          <span className=\"text-muted me-3\">Search</span>\r\n          <img\r\n            src=\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/7d324a11d19de8fbd804298d8135ece2db18bb3a?placeholderIfAbsent=true\"\r\n            alt=\"Search\"\r\n            style={{ width: \"16px\" }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <form className=\"bg-light rounded-3 p-4\" onSubmit={handleSubmit}>\r\n        <div className=\"row mb-4\">\r\n          <div className=\"col-md-3\">\r\n            <div className=\"text-center\">\r\n              <div\r\n                className=\"bg-white rounded-3 p-4 d-flex align-items-center justify-content-center hover-upload\"\r\n                style={{ height: \"150px\", width: \"150px\", cursor: \"pointer\" }}\r\n              >\r\n                <img\r\n                  src=\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/bd35fde20057cda4be331de813726b4ee550668f?placeholderIfAbsent=true\"\r\n                  alt=\"Upload\"\r\n                  style={{ width: \"70px\" }}\r\n                />\r\n              </div>\r\n              <span className=\"text-muted small mt-2 d-block\">Banner / Logo</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"col-md-9\">\r\n            <FormInput\r\n              label=\"Judul Pengumuman\"\r\n              placeholder=\"Judul\"\r\n              name=\"title\"\r\n              value={form.title}\r\n              onChange={handleChange}\r\n            />\r\n            <FormInput\r\n              label=\"Isi Pengumuman\"\r\n              placeholder=\"Deskripsi\"\r\n              multiline\r\n              height={150}\r\n              name=\"description\"\r\n              value={form.description}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <FormInput\r\n          label=\"Kategori Pengumuman\"\r\n          placeholder=\"Kategori\"\r\n          name=\"category\"\r\n          value={form.category}\r\n          onChange={handleChange}\r\n          icon=\"https://cdn.builder.io/api/v1/image/assets/6e56f22283ca426d8ccf6afbc1731b56/b8ed412834140eee3b26bb1f0b54e71a8bba8bec?placeholderIfAbsent=true\"\r\n        />\r\n\r\n        <div className=\"row mt-4\">\r\n          <div className=\"col-md-6\">\r\n            <FormInput\r\n              label=\"Tanggal Terbit\"\r\n              type=\"date\"\r\n              name=\"publish_date\"\r\n              value={form.publish_date}\r\n              onChange={handleChange}\r\n            />\r\n            <h3 className=\"h6 fw-bold mt-3\">Upload Lampiran</h3>\r\n          </div>\r\n          <div className=\"col-md-6\">\r\n            <FormInput\r\n              label=\"Tanggal Tayang\"\r\n              type=\"date\"\r\n              name=\"display_date\"\r\n              value={form.display_date}\r\n              onChange={handleChange}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <FileUpload />\r\n\r\n        <button\r\n          className=\"btn btn-success px-4 mt-5 shadow-sm save-btn\"\r\n          type=\"submit\"\r\n        >\r\n          Simpan\r\n        </button>\r\n      </form>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AnnouncementForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}