{"ast":null,"code":"import React from\"react\";import DocumentUploadHeader from\"./DocumentUploadHeader\";import FileUploadField from\"./UploadFileFields\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FormPendaftaranDocumentGenBI=()=>{const[files,setFiles]=React.useState({});const handleFileChange=(e,name)=>{setFiles(prev=>({...prev,[name]:e.target.files[0]}));};const[uploading,setUploading]=React.useState(false);const handleSubmit=async e=>{e.preventDefault();setUploading(true);try{var _user$user;const user=JSON.parse(localStorage.getItem(\"user\"));// Ambil user dari localStorage\nconst uploadedBy=user===null||user===void 0?void 0:(_user$user=user.user)===null||_user$user===void 0?void 0:_user$user.uuid;// Ambil UUID user\nif(!uploadedBy){alert(\"Gagal menemukan UUID user. Silakan login ulang.\");setUploading(false);return;}for(const[category,file]of Object.entries(files)){const formData=new FormData();formData.append(\"file\",file);formData.append(\"category\",category);formData.append(\"uploadedBy\",uploadedBy);// <-- gunakan UUID\nawait axios.post(\"https://simbeasiswauk.site:9900/sms-mgmt/document/upload\",formData,{headers:{Authorization:`Bearer ${user.token}`}});console.log(`${category} uploaded`);}alert(\"Seluruh dokumen berhasil diunggah.\");}catch(err){console.error(\"Upload gagal\",err);alert(\"Terjadi kesalahan saat mengunggah dokumen.\");}finally{setUploading(false);}};return/*#__PURE__*/_jsx(\"main\",{className:\"bg-white\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid bg-white py-5 mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-xxl-10\",children:[/*#__PURE__*/_jsx(DocumentUploadHeader,{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FileUploadField,{label:\"Pass Foto *\",onChange:e=>handleFileChange(e,\"Pass Foto\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Form Biodata A1 *\",onChange:e=>handleFileChange(e,\"Form Biodata A1\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Form Keterampilan *\",onChange:e=>handleFileChange(e,\"Form Keterampilan\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Surat Keterangan Tidak Mampu\",onChange:e=>handleFileChange(e,\"Surat Keterangan Tidak Mampu\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Resume Pribadi *\",onChange:e=>handleFileChange(e,\"Resume Pribadi\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Motivation Letter *\",onChange:e=>handleFileChange(e,\"Motivation Letter\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Surat Pernyataan sedang tidak menerima beasiswa lain *\",onChange:e=>handleFileChange(e,\"Surat Pernyataan Tidak Menerima Beasiswa Lain\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Surat Pernyataan Bermetrai *\",onChange:e=>handleFileChange(e,\"Surat Pernyataan Bermetrai\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Fotocopy KTP *\",onChange:e=>handleFileChange(e,\"Fotocopy KTP\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Fotocopy KTM *\",onChange:e=>handleFileChange(e,\"Fotocopy KTM\")}),/*#__PURE__*/_jsx(FileUploadField,{label:\"Transkrip Nilai *\",onChange:e=>handleFileChange(e,\"Transkrip Nilai\")}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success mt-5 px-4 py-2 fw-semibold\",disabled:uploading,children:uploading?\"Mengunggah...\":\"Submit\"})]})]})})})});};export default FormPendaftaranDocumentGenBI;","map":{"version":3,"names":["React","DocumentUploadHeader","FileUploadField","axios","jsx","_jsx","jsxs","_jsxs","FormPendaftaranDocumentGenBI","files","setFiles","useState","handleFileChange","e","name","prev","target","uploading","setUploading","handleSubmit","preventDefault","_user$user","user","JSON","parse","localStorage","getItem","uploadedBy","uuid","alert","category","file","Object","entries","formData","FormData","append","post","headers","Authorization","token","console","log","err","error","className","children","onSubmit","label","onChange","type","disabled"],"sources":["D:/Lovenia Skripsi 2/src/assets/Pages/Beasiswa/GenBI/FormPendaftaranDocumen.jsx/index.jsx"],"sourcesContent":["import React from \"react\";\r\nimport DocumentUploadHeader from \"./DocumentUploadHeader\";\r\nimport FileUploadField from \"./UploadFileFields\";\r\nimport axios from \"axios\";\r\n\r\nconst FormPendaftaranDocumentGenBI = () => {\r\n  const [files, setFiles] = React.useState({});\r\n\r\n  const handleFileChange = (e, name) => {\r\n    setFiles((prev) => ({\r\n      ...prev,\r\n      [name]: e.target.files[0],\r\n    }));\r\n  };\r\n\r\n  const [uploading, setUploading] = React.useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setUploading(true);\r\n  \r\n    try {\r\n      const user = JSON.parse(localStorage.getItem(\"user\")); // Ambil user dari localStorage\r\n      const uploadedBy = user?.user?.uuid; // Ambil UUID user\r\n  \r\n      if (!uploadedBy) {\r\n        alert(\"Gagal menemukan UUID user. Silakan login ulang.\");\r\n        setUploading(false);\r\n        return;\r\n      }\r\n  \r\n      for (const [category, file] of Object.entries(files)) {\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"category\", category);\r\n        formData.append(\"uploadedBy\", uploadedBy); // <-- gunakan UUID\r\n  \r\n        await axios.post(\"https://simbeasiswauk.site:9900/sms-mgmt/document/upload\", formData, {\r\n          headers: {\r\n            Authorization: `Bearer ${user.token}`,\r\n          },\r\n        });\r\n  \r\n        console.log(`${category} uploaded`);\r\n      }\r\n      alert(\"Seluruh dokumen berhasil diunggah.\");\r\n    } catch (err) {\r\n      console.error(\"Upload gagal\", err);\r\n      alert(\"Terjadi kesalahan saat mengunggah dokumen.\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };  \r\n\r\n\r\n  return (\r\n    <main className=\"bg-white\">\r\n      <div className=\"container-fluid bg-white py-5 mt-5\">\r\n        <div className=\"row justify-content-center\">\r\n          <div className=\"col-12 col-xxl-10\">\r\n            <DocumentUploadHeader />\r\n            <form onSubmit={handleSubmit}>\r\n              <FileUploadField label=\"Pass Foto *\" onChange={(e) => handleFileChange(e, \"Pass Foto\")} />\r\n              <FileUploadField label=\"Form Biodata A1 *\" onChange={(e) => handleFileChange(e, \"Form Biodata A1\")} />\r\n              <FileUploadField label=\"Form Keterampilan *\" onChange={(e) => handleFileChange(e, \"Form Keterampilan\")} />\r\n              <FileUploadField label=\"Surat Keterangan Tidak Mampu\" onChange={(e) => handleFileChange(e, \"Surat Keterangan Tidak Mampu\")} />\r\n              <FileUploadField label=\"Resume Pribadi *\" onChange={(e) => handleFileChange(e, \"Resume Pribadi\")} />\r\n              <FileUploadField label=\"Motivation Letter *\" onChange={(e) => handleFileChange(e, \"Motivation Letter\")} />\r\n              <FileUploadField label=\"Surat Pernyataan sedang tidak menerima beasiswa lain *\" onChange={(e) => handleFileChange(e, \"Surat Pernyataan Tidak Menerima Beasiswa Lain\")} />\r\n              <FileUploadField label=\"Surat Pernyataan Bermetrai *\" onChange={(e) => handleFileChange(e, \"Surat Pernyataan Bermetrai\")} />\r\n              <FileUploadField label=\"Fotocopy KTP *\" onChange={(e) => handleFileChange(e, \"Fotocopy KTP\")} />\r\n              <FileUploadField label=\"Fotocopy KTM *\" onChange={(e) => handleFileChange(e, \"Fotocopy KTM\")} />\r\n              <FileUploadField label=\"Transkrip Nilai *\" onChange={(e) => handleFileChange(e, \"Transkrip Nilai\")} />\r\n\r\n              <button type=\"submit\" className=\"btn btn-success mt-5 px-4 py-2 fw-semibold\" disabled={uploading}>\r\n                {uploading ? \"Mengunggah...\" : \"Submit\"}\r\n              </button>\r\n\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default FormPendaftaranDocumentGenBI;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}